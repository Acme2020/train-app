openapi: 3.0.0
info:
  title: Train App API
  version: 1.0.0
  description: REST API for station search, departures, arrivals, and station board info.
servers:
  - url: http://localhost:3000
    description: Local server
tags:
  - name: Stations
    description: Operations related to train stations
paths:
  /api/stations/autocomplete:
    get:
      summary: Autocomplete stations by name
      tags:
        - Stations
      parameters:
        - in: query
          name: q
          schema:
            type: string
          required: true
          description: Search query for station name
        - in: query
          name: limit
          schema:
            type: integer
          description: Max number of results (default 5)
      responses:
        "200":
          description: List of matching stations
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Station"
  /api/stations/{stationId}/board:
    get:
      summary: Get departures and arrivals for a specific station
      tags:
        - Stations
      parameters:
        - in: path
          name: stationId
          schema:
            type: string
          required: true
          description: The station EVA ID (e.g., 8000261 for MÃ¼nchen Hbf)
        - in: query
          name: minutes
          schema:
            type: integer
            default: 10
          description: Minutes ahead to show departures and arrivals for (default 10)
      responses:
        "200":
          description: Object containing arrays of departures and arrivals
          content:
            application/json:
              schema:
                type: object
                properties:
                  departures:
                    type: array
                    items:
                      $ref: "#/components/schemas/Departure"
                  arrivals:
                    type: array
                    items:
                      $ref: "#/components/schemas/Arrival"
components:
  schemas:
    Station:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
        name:
          type: string
        latitude:
          type: number
        longitude:
          type: number
    Departure:
      type: object
      required:
        - tripId
        - plannedWhen
        - direction
        - line
      properties:
        tripId:
          type: string
        when:
          type: string
          format: date-time
        plannedWhen:
          type: string
          format: date-time
        delay:
          type: integer
          nullable: true
        cancelled:
          type: boolean
        platform:
          type: string
          nullable: true
        direction:
          type: string
        provenance:
          type: string
        line:
          $ref: "#/components/schemas/Line"
    Arrival:
      type: object
      required:
        - tripId
        - plannedWhen
        - direction
        - line
      properties:
        tripId:
          type: string
        plannedWhen:
          type: string
          format: date-time
        delay:
          type: integer
          nullable: true
        cancelled:
          type: boolean
        platform:
          type: string
          nullable: true
        direction:
          type: string
        provenance:
          type: string
        line:
          $ref: "#/components/schemas/Line"
    Line:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        productName:
          type: string
